<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css"
        integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>

<body>
    <div class="backDrop">
        <div class="subClass">
            <div style="text-align:center">
                <h2 id="updateH2"></h2>
            </div>
            <div id="subFilterDiv">
                <form action="/update" method="POST" class="subClass-form">
                    <input id="inputId" style="display: none;" type="text" name="id">
                    <select name="selectedC">
                        <option value="None" id="updateCName"></option>
                        <% categoriesArray.forEach(function(obj) { %>
                        <option value="<%=obj%>"><%=obj%></option>
                        <% }); %>
                    </select>
                    <select name="selectedSC">
                        <option value="None" id="updateSCName"></option>
                        <% subcategoriesArray.forEach(function(obj) { %>
                        <option value="<%= obj%>"><%=obj%></option>
                        <% }); %>
                    </select>
                    <button type="submit" class="fliter-button button">Update</button>
                </form>
            </div>
            <div class="sub-class-title">
                <div class="title-div">
                    <h2>Job Title</h2>
                </div>
                <div class="title-div">
                    <h2>Strength</h2>
                </div>
            </div>
        </div>
    </div>
    <div class="search-div">
        <form action="/search" method="POST">
            <input type="search" name="searchInput" id="search-input" placeholder="Incremental search for Skill">
            <button type="submit" class="searchButton"><i class="fas fa-search"></i></button>
        </form>
    </div>
    <div id="filter-div">
        <form action="/" method="POST" class="fliter-form">
            <select name="selectedC">
                <option value="All">All</option>
                <% categoriesArray.forEach(function(obj) { %>
                <option value="<%=obj%>"><%=obj%></option>
                <% }); %>
            </select>
            <select name="selectedSC">
                <option value="All">All</option>
                <% subcategoriesArray.forEach(function(obj) { %>
                <option value="<%= obj%>"><%=obj%></option>
                <% }); %>
            </select>
            <button type="submit" class="fliter-button button">Submit / Get Complete</button>
        </form>
    </div>
    <div class="title-container">
        <div class="title-div">
            <h2>Skill</h2>
        </div>
        <div class="title-div">
            <h2>Category</h2>
        </div>
        <div class="title-div">
            <h2>Sub Category</h2>
        </div>
    </div>
    <% report.forEach(function(obj) { %>
    <div>
        <div class="container select">
            <div class="skill dataDiv">
                <p> <%= obj.skill %></p>
            </div>
            <div class="category dataDiv">
                <p> <%= obj.category %></p>
            </div>
            <div class="subcategory dataDiv">
                <p> <%= obj.subcategory %></p>
            </div>
            <template>
                <p id="id"><%= obj.id %>
            </template>
            <template class="usedTemplate">
                <div id="usedByData">
                    <% obj.used_by.forEach(element => { %>
                    <div class="used_bySingleData">
                        <div class="div1"><p><%=element.job_title%></p></div>
                        <div class="div2"><p><%=element.strength%></p></div>
                        <!-- <div class="div3">
                            <form action="/deleteJobTitle" method="POST">
                                <input style="display: none;" type="text" name="deletingTitleId" id="deletingTitleId" value=<%= obj.id %>1>
                                <input style="display: none;" type="text" name="deletingJobTitle" id="deletingJobTitle">
                              <button type="submit"><i class="fas fa-trash-alt" id="delete-button"></i></button>
                            </form>
                        </div> -->
                    </div>
                    <% }); %>
                </div>
            </template>
        </div>
    </div>
    <% }); %>


    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/javascript" src="index.js"></script>
</body>

</html>